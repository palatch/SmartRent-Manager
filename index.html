
<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SMARTRENT</title>
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #0e0f11;
      color: white;
    }
    header, footer {
      padding: 1rem;
      text-align: center;
      background: #121417;
    }
    main {
      padding: 1rem;
    }
    button {
      padding: 0.6rem 1rem;
      margin: 0.25rem;
      background: #2d3748;
      color: white;
      border: none;
      border-radius: 6px;
    }
    .card {
      background: #1a1d21;
      border-radius: 10px;
      padding: 1rem;
      margin-bottom: 1rem;
    }
    input, select {
      padding: 0.5rem;
      width: 100%;
      margin-top: 0.25rem;
      background: #2d3748;
      color: white;
      border: 1px solid #4a5568;
      border-radius: 6px;
    }
    .room-status-red { border-left: 6px solid red; }
    .room-status-yellow { border-left: 6px solid gold; }
    .room-status-green { border-left: 6px solid limegreen; }
    .room-status-gray { border-left: 6px solid #555; }
  </style>
</head>
<body>
  <header>
    <h2>üíº SMARTRENT</h2>
    <div>‡∏£‡∏∞‡∏ö‡∏ö‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏ä‡πà‡∏≤‡πÅ‡∏ö‡∏ö‡∏Ñ‡∏£‡∏ö‡∏ß‡∏á‡∏à‡∏£</div>
  </header>
  <main id="app">
    <div id="login">
      <h3>‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h3>
      <input id="user" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
      <input id="pass" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô" type="password">
      <button onclick="login()">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</button>
    </div>

    <div id="rooms" style="display:none">
      <h3>üìã ‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
      <div id="roomList"></div><br><button onclick="showSummary()">üìä Summary</button> <button onclick="showSettings()">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
      <button onclick="showAddRoom()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á</button>
    </div>

    <div id="addRoom" style="display:none">
      <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà</h3>
      <div class="card">
        <label>‡∏ä‡∏∑‡πà‡∏≠‡πÇ‡∏Ñ‡∏£‡∏á‡∏Å‡∏≤‡∏£ <input id="project"></label><br>
        <label>‡πÄ‡∏•‡∏Ç‡∏´‡πâ‡∏≠‡∏á <input id="roomNumber"></label><br>
        <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤ <input id="tenant"></label><br>
        <label>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤ (‡∏ö‡∏≤‡∏ó) <input id="rent" type="number"></label><br>
        <label>‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó) <input id="deposit" type="number"></label><br>
        <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <input id="startDate" type="date"></label><br>
        <label>‡∏ß‡∏±‡∏ô‡∏™‡∏¥‡πâ‡∏ô‡∏™‡∏∏‡∏î‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <input id="endDate" type="date"></label><br>
        <label>‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞ <input</label><br><label>‡πÅ‡∏ô‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <input type="file" id="contractFile"></label><br><label> id="dueDate" type="date"></label><br>
        <button onclick="saveRoom()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å</button>
        <button onclick="deleteRoom(currentRoomIndex)">üóë ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ</button> <button onclick="goHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö</button>
      </div>
    </div>
  
<!-- Room Detail Section -->
<div id="roomDetail" style="display:none">
  <h3>üè† ‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏´‡πâ‡∏≠‡∏á</h3>
  <div id="roomDetailContent" class="card"></div><button onclick="addTransaction()">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏£‡∏±‡∏ö/‡∏£‡∏≤‡∏¢‡∏à‡πà‡∏≤‡∏¢</button>
<div id="editRoomForm" class="card" style="margin-top:1rem">
  <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤ <input id="editTenant"></label><br>
  <label>‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤ (‡∏ö‡∏≤‡∏ó) <input id="editRent" type="number"></label><br>
  <label>‡∏ß‡∏±‡∏ô‡∏Ñ‡∏£‡∏ö‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏ä‡∏≥‡∏£‡∏∞ <input</label><br><label>‡πÅ‡∏ô‡∏ö‡∏™‡∏±‡∏ç‡∏ç‡∏≤ <input type="file" id="contractFile"></label><br><label> id="editDueDate" type="date"></label><br>
  <button onclick="saveEdit()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç</button>
</div>

  <button onclick="deleteRoom(currentRoomIndex)">üóë ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ</button> <button onclick="goHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<!-- Summary Section -->
<div id="summary" style="display:none">
  <h3>üìä ‡∏™‡∏£‡∏∏‡∏õ‡∏¢‡∏≠‡∏î‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</h3>
  <div id="summaryContent" class="card"></div>
  <button onclick="deleteRoom(currentRoomIndex)">üóë ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ</button> <button onclick="goHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö</button>
</div>

<!-- Settings Section -->
<div id="settings" style="display:none">
  <h3>‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</h3>
  <button onclick="resetAll()">üßπ ‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</button>
  <button onclick="deleteRoom(currentRoomIndex)">üóë ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ</button> <button onclick="goHome()">üè† ‡∏Å‡∏•‡∏±‡∏ö</button>
</div>
</main>

  <script>
    const data = JSON.parse(localStorage.getItem("smartrent") || "[]");

    function login(){
      const u = user.value.trim();
      const p = pass.value.trim();
      if(u && p){
        document.getElementById("login").style.display = "none";
        document.getElementById("rooms").style.display = "block";
        renderRooms();
      } else {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô");
      }
    }

    function renderRooms(){
      const now = new Date();
      roomList.innerHTML = data.map((r, i)=>{
        let colorClass = "room-status-gray";
        if(r.tenant){
          const end = new Date(r.endDate);
          const due = new Date(r.dueDate);
          if(end - now < 1000*60*60*24*90){
            colorClass = "room-status-red";
          } else if(due < now){
            colorClass = "room-status-yellow";
          } else {
            colorClass = "room-status-green";
          }
        }
        return `<div class="card ${colorClass}">
          <b>${r.project} ${r.roomNumber}</b><br>
          ‡∏ú‡∏π‡πâ‡πÄ‡∏ä‡πà‡∏≤: ${r.tenant || "‡∏ß‡πà‡∏≤‡∏á"}<br>
          ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤: ${r.rent || "-"} ‡∏ö‡∏≤‡∏ó<br><button onclick="viewDetail(${i})">‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î</button>
        </div>`;
      }).join('');
    }

    function showAddRoom(){
      document.getElementById("rooms").style.display = "none";
      document.getElementById("addRoom").style.display = "block";
    }

    function saveRoom(){
      data.push({
        project: project.value,
        roomNumber: roomNumber.value,
        tenant: tenant.value,
        rent: rent.value,
        deposit: deposit.value,
        startDate: startDate.value,
        endDate: endDate.value,
        dueDate: dueDate.value
      });
      localStorage.setItem("smartrent", JSON.stringify(data));
      goHome();
    }

    function goHome(){
      document.getElementById("addRoom").style.display = "none";
      document.getElementById("rooms").style.display = "block";
      renderRooms();
    }
  </script>
</body>
</html>

    <script>
    function deleteRoom(index){
      if(confirm("‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ô‡∏µ‡πâ?")){
        data.splice(index, 1);
        localStorage.setItem("smartrent", JSON.stringify(data));
        goHome();
      }
    }
    </script>
    
    <script>
    function addTransaction(){
      const note = prompt("‡∏£‡∏∞‡∏ö‡∏∏‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£:");
      const amt = parseFloat(prompt("‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô:"));
      if(!data[currentRoomIndex].txn) data[currentRoomIndex].txn = [];
      data[currentRoomIndex].txn.push({note, amt, date: new Date().toISOString().slice(0,10)});
      localStorage.setItem("smartrent", JSON.stringify(data));
      viewDetail(currentRoomIndex);
    }
    </script>
    
    <script>
    function getStatusColor(r){
      const today = new Date();
      const due = new Date(r.dueDate || "9999-12-31");
      const end = new Date(r.endDate || "9999-12-31");
      const msLeft = end - today;
      const msDue = today - due;

      if(!r.tenant) return "gray";
      if(msLeft < 1000*60*60*24*90) return "red"; // ‡∏ô‡πâ‡∏≠‡∏¢‡∏Å‡∏ß‡πà‡∏≤ 3 ‡πÄ‡∏î‡∏∑‡∏≠‡∏ô
      if(msDue > 0) return "yellow"; // ‡πÄ‡∏Å‡∏¥‡∏ô‡∏Å‡∏≥‡∏´‡∏ô‡∏î
      return "green";
    }
    </script>
    
    <script>
    function getStatusColorOrder(c){
      return {"red":0,"yellow":1,"green":2,"gray":3}[c] || 4;
    }
    </script>
    