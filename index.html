
<!-- SmartRent Manager - Full Feature with Room Detail, Income/Expense, and Summary Chart -->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>SmartRent Manager</title>
  <style>
    body { font-family: sans-serif; margin: 0; background: #f4f4f4; }
    header { background: #00bcd4; color: white; padding: 1rem; text-align: center; }
    .container { padding: 1rem; }
    .room-card { background: white; margin-bottom: 1rem; padding: 1rem; border-radius: 10px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
    .button { background: #00bcd4; color: white; padding: 0.5rem 1rem; border: none; border-radius: 6px; cursor: pointer; margin-top: 0.5rem; }
    .hidden { display: none; }
    table { width: 100%; margin-top: 1rem; border-collapse: collapse; }
    th, td { border: 1px solid #ccc; padding: 0.5rem; text-align: left; }
  </style>
</head>
<body>

<header>SmartRent Manager</header>

<div class="container" id="roomListView">
  <h2>All Rooms</h2>
  <div id="roomList"></div>
</div>

<div class="container hidden" id="roomDetailView">
  <h2>Room Detail</h2>
  <div id="roomDetailInfo"></div>

  <h3>Income/Expense</h3>
  <table>
    <thead><tr><th>Date</th><th>Type</th><th>Description</th><th>Amount</th></tr></thead>
    <tbody id="transactionList"></tbody>
  </table>

  <h3>Add Transaction</h3>
  <input id="txDate" type="date" />
  <select id="txType">
    <option value="income">Income</option>
    <option value="expense">Expense</option>
  </select>
  <input id="txDesc" placeholder="Description" />
  <input id="txAmount" type="number" placeholder="Amount" />
  <button class="button" onclick="addTransaction()">Add</button><br><br>
  <button class="button" onclick="backToList()">Back to List</button>
</div>

<div class="container hidden" id="summaryView">
  <h2>Summary Report</h2>
  <div id="summaryTable"></div>
</div>

<script>
const rooms = [
  {
    id: "101",
    project: "SkyView",
    number: "101",
    rent: 8000,
    transactions: [
      { date: "2024-01-01", type: "income", desc: "Jan Rent", amount: 8000 },
      { date: "2024-01-02", type: "expense", desc: "Fix AC", amount: 1200 }
    ]
  },
  {
    id: "102",
    project: "SkyView",
    number: "102",
    rent: 8500,
    transactions: [
      { date: "2024-01-01", type: "income", desc: "Jan Rent", amount: 8500 }
    ]
  }
];

let currentRoom = null;

function renderRoomList() {
  const container = document.getElementById("roomList");
  container.innerHTML = "";
  rooms.forEach(room => {
    const div = document.createElement("div");
    div.className = "room-card";
    div.innerHTML = `<strong>${room.project}</strong><br>Room: ${room.number}<br>Rent: ${room.rent} THB<br>
                     <button class='button' onclick="viewRoom('${room.id}')">View Details</button>`;
    container.appendChild(div);
  });
}

function viewRoom(id) {
  currentRoom = rooms.find(r => r.id === id);
  document.getElementById("roomListView").classList.add("hidden");
  document.getElementById("roomDetailView").classList.remove("hidden");

  document.getElementById("roomDetailInfo").innerHTML =
    `<strong>Project:</strong> ${currentRoom.project}<br>
     <strong>Room:</strong> ${currentRoom.number}<br>
     <strong>Rent:</strong> ${currentRoom.rent} THB`;

  renderTransactions();
}

function renderTransactions() {
  const tbody = document.getElementById("transactionList");
  tbody.innerHTML = "";
  currentRoom.transactions.forEach(tx => {
    const row = document.createElement("tr");
    row.innerHTML = `<td>${tx.date}</td><td>${tx.type}</td><td>${tx.desc}</td><td>${tx.amount}</td>`;
    tbody.appendChild(row);
  });
}

function addTransaction() {
  const date = document.getElementById("txDate").value;
  const type = document.getElementById("txType").value;
  const desc = document.getElementById("txDesc").value;
  const amount = parseFloat(document.getElementById("txAmount").value);
  if (!date || !desc || isNaN(amount)) {
    alert("Please complete all fields.");
    return;
  }
  currentRoom.transactions.push({ date, type, desc, amount });
  renderTransactions();
  document.getElementById("txDate").value = "";
  document.getElementById("txDesc").value = "";
  document.getElementById("txAmount").value = "";
}

function backToList() {
  document.getElementById("roomDetailView").classList.add("hidden");
  document.getElementById("roomListView").classList.remove("hidden");
  renderRoomList();
}

renderRoomList();
</script>

</body>
</html>
